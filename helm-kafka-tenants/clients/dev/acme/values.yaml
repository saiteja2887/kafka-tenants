clientName: acme
namespace: acme-ns
clusterName: acme-cluster

# Kafka Broker Deployment
kafka:
  replicas: 3
  image: 123456789012.dkr.ecr.us-east-2.amazonaws.com/repo/kafka:1
  brokerConfig:
    logRetentionHours: 168
    autoCreateTopicsEnable: "true"
    logSegmentBytes: 1073741824

# Connectors
connector:
  name: acme-connect
  image: 123456789012.dkr.ecr.us-east-1.amazonaws.com/repo:kafka_connector
  replicas: 2
  resources:
    requests:
      cpu: "200m"
      memory: "256Mi"
    limits:
      cpu: "1"
      memory: "2Gi"
  env:
    - name: AWS_REGION
      value: us-east-1
    - name: BUCKET_NAME
      value: kafka-bucket

# IRSA/AWS/IAM details
irsa:
  roleArn: arn:aws:iam::123456789012:role/eks-github-irsa-role
  accountNumber: 123456789012
  region: us-east-1

# S3 Info
s3:
  bucketName: kafka-bucket
  region: us-east-1

# Topics list
topics:
  - name: acme-raw-topic
    partitions: 3
    replicas: 1
    config:
      cleanup.policy: delete
  - name: acme-processed-topic
    partitions: 3
    replicas: 1
    config:
      cleanup.policy: compact
  - name: acme-intermediate-topic
    partitions: 3
    replicas: 1
    config:
      retention.ms: 604800000

# Kafka Connect Image
kafkaConnectImage: 123456789012.dkr.ecr.us-east-1.amazonaws.com/repo:kafka_connector

# Extra Configs (example for extending)
extraEnvFromSecrets:
  - secretName: acme-kafka-secrets
    optional: false

labels:
  tier: backend
  team: platform

annotations:
  description: "Kafka deployment for Acme tenant"

# Additional resource settings
resources:
  requests:
    cpu: "500m"
    memory: "512Mi"
  limits:
    cpu: "2"
    memory: "4Gi"
connectors:
  - name: s3-source
    class: io.confluent.connect.s3.S3SourceConnector
    tasksMax: 3
    pause: false
    config:
      topics: acme-raw-topic
      s3.bucket.name: kafka-bucket
      s3.region: us-east-1
      format.class: org.apache.kafka.connect.json.JsonConverter
      # Add additional config properties as needed
  - name: generic-sink
    class: org.apache.kafka.connect.file.FileStreamSinkConnector
    tasksMax: 1
    config:
      topics: acme-processed-topic
      file: "/tmp/output.txt"